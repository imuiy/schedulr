<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Scheduler</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 30px; }
        .input-section { background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        /* Collapsible course sections */
        .course-header { background: #2196F3; color: white; padding: 15px; border-radius: 6px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .course-header:hover { background: #1976D2; }
        .course-header.collapsed { background: #90CAF9; }
        .course-body { display: none; border: 2px solid #e0e0e0; border-radius: 6px; padding: 15px; margin-bottom: 15px; background: #fafafa; }
        .course-body.expanded { display: block; }
        .course-title { font-size: 16px; font-weight: 600; }
        .course-info { font-size: 13px; opacity: 0.9; }
        
        /* Compact section layout */
        .section-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 10px; margin-top: 10px; }
        .section-card { background: white; border: 1px solid #ddd; border-radius: 4px; padding: 12px; }
        .section-header { font-weight: 600; color: #333; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .time-list { font-size: 13px; color: #666; }
        .time-item { padding: 4px 0; border-bottom: 1px solid #f0f0f0; }
        .time-item:last-child { border-bottom: none; }
        
        /* Quick add section */
        .quick-add { background: #e3f2fd; padding: 15px; border-radius: 6px; margin-bottom: 15px; }
        .quick-add input, .quick-add select { margin-right: 10px; margin-bottom: 5px; }
        
        button { background: #2196F3; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #1976D2; }
        button.secondary { background: #757575; }
        button.danger { background: #f44336; padding: 5px 10px; font-size: 12px; }
        button.small { padding: 5px 10px; font-size: 12px; }
        input, select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        .flex { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        label { display: block; margin-bottom: 5px; font-weight: 500; color: #555; font-size: 13px; }
        .blocked-time { background: #ffebee; padding: 10px; margin: 5px 0; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
        
        /* Schedule table styles */
        .results { display: grid; grid-template-columns: repeat(auto-fill, minmax(900px, 1fr)); gap: 20px; margin-top: 20px; }
        .schedule-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .schedule-header { font-weight: bold; color: #2196F3; margin-bottom: 15px; font-size: 18px; border-bottom: 2px solid #2196F3; padding-bottom: 10px; }
        
        .schedule-grid { display: flex; gap: 0; margin-top: 15px; }
        .time-column { width: 60px; flex-shrink: 0; }
        .time-marker { height: 60px; display: flex; align-items: flex-start; justify-content: center; font-size: 12px; color: #666; padding-top: 2px; border-top: 1px solid #e0e0e0; }
        .time-marker:first-child { border-top: none; }
        
        .day-columns { display: flex; flex: 1; border-left: 1px solid #e0e0e0; }
        .day-column { flex: 1; position: relative; border-right: 1px solid #e0e0e0; }
        .day-header { text-align: center; font-weight: 600; padding: 10px; background: #f5f5f5; border-bottom: 2px solid #ddd; font-size: 14px; }
        .day-content { position: relative; height: 660px; /* 11 hours * 60px */ }
        
        .class-block { position: absolute; left: 2px; right: 2px; border-radius: 4px; padding: 8px; font-size: 12px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 3px solid; }
        .class-name { font-weight: 600; margin-bottom: 2px; line-height: 1.2; }
        .class-section { font-size: 11px; opacity: 0.9; line-height: 1.2; }
        
        .course-colors { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; }
        .color-legend { display: flex; align-items: center; gap: 5px; font-size: 13px; }
        .color-box { width: 16px; height: 16px; border-radius: 3px; border: 1px solid #ddd; }
        
        .courses-summary { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px; }
        .summary-item { display: flex; align-items: center; gap: 8px; }
        .summary-badge { background: #2196F3; color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; font-weight: 600; }
        
        .day-checkboxes { display: flex; gap: 5px; margin: 5px 0; }
        .day-check { display: flex; align-items: center; gap: 3px; }
        .day-check input[type="checkbox"] { margin: 0; }
        .day-check label { margin: 0; font-weight: normal; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Course Scheduler</h1>
        
        <div class="input-section">
            <h2 style="margin-bottom: 15px;">Your Courses</h2>
            <div class="courses-summary" id="courses-summary">
                <div class="summary-item">
                    <span style="font-weight: 500;">Total Courses:</span>
                    <span class="summary-badge" id="course-count">0</span>
                </div>
            </div>
            
            <!-- Quick Add Form -->
            <div class="quick-add">
                <h3 style="margin-bottom: 10px; color: #1976D2;">‚ûï Quick Add Course</h3>
                <div class="flex">
                    <input type="text" id="quick-course-name" placeholder="Course name (e.g., CS101)" style="flex: 1;">
                    <input type="number" id="quick-priority" value="5" min="1" max="10" style="width: 80px;" placeholder="Priority">
                    <button onclick="quickAddCourse()">Add Course</button>
                </div>
            </div>
            
            <div id="courses-container"></div>
        </div>

        <div class="input-section">
            <h2 style="margin-bottom: 15px;">‚è∞ Blocked Times (Optional)</h2>
            <div class="flex" style="margin-bottom: 10px;">
                <select id="blocked-day">
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                </select>
                <input type="time" id="blocked-start" value="12:00">
                <span>to</span>
                <input type="time" id="blocked-end" value="13:00">
                <button onclick="addBlockedTime()">+ Add</button>
            </div>
            <div id="blocked-times-container"></div>
        </div>

        <div class="input-section">
            <label>Maximum Schedules to Generate:</label>
            <input type="number" id="max-schedules" value="10" min="1" max="50" style="width: 100px;">
            <br><br>
            <button onclick="generateSchedules()" style="font-size: 16px; padding: 12px 30px;">üîç Generate Schedules</button>
        </div>

        <div id="results-container"></div>
    </div>

    <script>
        let courseCount = 0;
        let courses = {};
        let currentSectionBeingBuilt = {}; // Track section being built for each course
        let expandedCourses = new Set(); // Track which courses are expanded

        const COLORS = [
            { bg: '#e3f2fd', border: '#2196F3', text: '#1976D2' },
            { bg: '#f3e5f5', border: '#9C27B0', text: '#7B1FA2' },
            { bg: '#e8f5e9', border: '#4CAF50', text: '#388E3C' },
            { bg: '#fff3e0', border: '#FF9800', text: '#F57C00' },
            { bg: '#fce4ec', border: '#E91E63', text: '#C2185B' },
            { bg: '#e0f2f1', border: '#009688', text: '#00796B' },
            { bg: '#f1f8e9', border: '#8BC34A', text: '#689F38' },
            { bg: '#ede7f6', border: '#673AB7', text: '#512DA8' },
        ];

        function quickAddCourse() {
            const name = document.getElementById('quick-course-name').value.trim();
            const priority = parseInt(document.getElementById('quick-priority').value);
            
            if (!name) {
                alert('Please enter a course name');
                return;
            }
            
            addCourse(name, priority);
            document.getElementById('quick-course-name').value = '';
            document.getElementById('quick-priority').value = '5';
            
            // Re-sort courses after adding
            sortAndRenderCourses();
        }

        function addCourse(name = '', priority = 5) {
            courseCount++;
            const courseId = `course-${courseCount}`;
            
            courses[courseId] = {
                name: name,
                priority: priority,
                sections: {}
            };
            
            updateCourseCount();
        }
        
        function sortAndRenderCourses() {
            const container = document.getElementById('courses-container');
            container.innerHTML = '';
            
            // Sort courses by priority (highest first)
            const sortedCourses = Object.entries(courses).sort((a, b) => b[1].priority - a[1].priority);
            
            sortedCourses.forEach(([courseId, course]) => {
                const courseDiv = document.createElement('div');
                courseDiv.id = courseId;
                
                const priorityBadge = course.priority >= 8 ? 'üî•' : course.priority >= 6 ? '‚≠ê' : '';
                const isExpanded = expandedCourses.has(courseId);
                
                courseDiv.innerHTML = `
                    <div class="course-header ${isExpanded ? '' : 'collapsed'}" onclick="toggleCourse('${courseId}')">
                        <div>
                            <div class="course-title" id="${courseId}-title">${priorityBadge} ${course.name || 'New Course'}</div>
                            <div class="course-info" id="${courseId}-info">Priority: ${course.priority} ‚Ä¢ ${Object.keys(course.sections).length} sections</div>
                        </div>
                        <button class="danger" onclick="event.stopPropagation(); removeCourse('${courseId}')">Delete</button>
                    </div>
                    <div class="course-body ${isExpanded ? 'expanded' : ''}" id="${courseId}-body">
                        <div class="flex" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #ddd;">
                            <div style="flex: 1;">
                                <label>Course Name:</label>
                                <input type="text" id="${courseId}-name" value="${course.name}" onchange="updateCourseName('${courseId}')" style="width: 100%;">
                            </div>
                            <div>
                                <label>Priority (1-10):</label>
                                <input type="number" id="${courseId}-priority" value="${course.priority}" min="1" max="10" onchange="updateCoursePriority('${courseId}')" style="width: 80px;">
                            </div>
                        </div>
                        
                        <h4 style="margin-bottom: 10px;">Add Section</h4>
                        <div style="background: #f9f9f9; padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                            <div class="flex" style="margin-bottom: 10px;">
                                <label style="margin: 0;">Section ID:</label>
                                <input type="text" id="${courseId}-section-id" placeholder="e.g., L01" style="width: 120px;">
                            </div>
                            <div style="font-size: 13px; color: #666; margin-bottom: 8px;">Add meeting times (e.g., MWF lectures or TR tutorial):</div>
                            <div class="flex">
                                <select id="${courseId}-day">
                                    <option value="Monday">Mon</option>
                                    <option value="Tuesday">Tue</option>
                                    <option value="Wednesday">Wed</option>
                                    <option value="Thursday">Thu</option>
                                    <option value="Friday">Fri</option>
                                </select>
                                <input type="time" id="${courseId}-start" value="09:00" style="width: 100px;">
                                <input type="time" id="${courseId}-end" value="10:30" style="width: 100px;">
                                <button class="small" onclick="addTimeToCurrentSection('${courseId}')">+ Add Time</button>
                                <button class="small secondary" onclick="finishSection('${courseId}')">‚úì Done Section</button>
                            </div>
                            <div id="${courseId}-current-times" style="margin-top: 10px; font-size: 13px; color: #666;"></div>
                        </div>
                        
                        <div id="${courseId}-sections" class="section-grid"></div>
                    </div>
                `;
                
                container.appendChild(courseDiv);
                renderSections(courseId);
                
                // Restore current section being built display
                if (currentSectionBeingBuilt[courseId]) {
                    updateCurrentTimesDisplay(courseId);
                }
            });
        }

        function toggleCourse(courseId) {
            const body = document.getElementById(`${courseId}-body`);
            const header = document.querySelector(`#${courseId} .course-header`);
            
            if (body.classList.contains('expanded')) {
                body.classList.remove('expanded');
                header.classList.add('collapsed');
                expandedCourses.delete(courseId);
            } else {
                body.classList.add('expanded');
                header.classList.remove('collapsed');
                expandedCourses.add(courseId);
            }
        }

        function updateCourseName(courseId) {
            const name = document.getElementById(`${courseId}-name`).value;
            courses[courseId].name = name;
            sortAndRenderCourses();
        }

        function updateCoursePriority(courseId) {
            const priority = parseInt(document.getElementById(`${courseId}-priority`).value);
            courses[courseId].priority = priority;
            sortAndRenderCourses();
        }

        function addTimeToCurrentSection(courseId) {
            const sectionId = document.getElementById(`${courseId}-section-id`).value.trim();
            const day = document.getElementById(`${courseId}-day`).value;
            const start = document.getElementById(`${courseId}-start`).value;
            const end = document.getElementById(`${courseId}-end`).value;
            
            if (!sectionId) {
                alert('Please enter a section ID first');
                return;
            }
            
            // Initialize temp storage for this section if needed
            if (!currentSectionBeingBuilt[courseId]) {
                currentSectionBeingBuilt[courseId] = {
                    id: sectionId,
                    times: []
                };
            }
            
            // If section ID changed, warn user
            if (currentSectionBeingBuilt[courseId].id !== sectionId) {
                if (!confirm(`You're starting a new section "${sectionId}". Click OK to save current section "${currentSectionBeingBuilt[courseId].id}" first, or Cancel to continue adding times to "${currentSectionBeingBuilt[courseId].id}".`)) {
                    document.getElementById(`${courseId}-section-id`).value = currentSectionBeingBuilt[courseId].id;
                    return;
                }
                finishSection(courseId);
                currentSectionBeingBuilt[courseId] = {
                    id: sectionId,
                    times: []
                };
            }
            
            // Add time to current section being built
            currentSectionBeingBuilt[courseId].times.push({ day, start, end });
            
            // Update display
            updateCurrentTimesDisplay(courseId);
        }
        
        function updateCurrentTimesDisplay(courseId) {
            const container = document.getElementById(`${courseId}-current-times`);
            const current = currentSectionBeingBuilt[courseId];
            
            if (!current || current.times.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            let html = `<div style="background: #fff3cd; padding: 10px; border-radius: 4px; border-left: 3px solid #ffc107;">
                <strong>Building section "${current.id}":</strong><br>`;
            
            current.times.forEach((t, idx) => {
                html += `<div style="margin-top: 5px;">
                    ${t.day.substring(0, 3)} ${t.start}-${t.end}
                    <button class="danger" onclick="removeTimeFromCurrent('${courseId}', ${idx})" style="margin-left: 10px;">‚úï</button>
                </div>`;
            });
            
            html += `</div>`;
            container.innerHTML = html;
        }
        
        function removeTimeFromCurrent(courseId, timeIdx) {
            if (!currentSectionBeingBuilt[courseId]) return;
            
            currentSectionBeingBuilt[courseId].times.splice(timeIdx, 1);
            
            // If no times left, clear the section
            if (currentSectionBeingBuilt[courseId].times.length === 0) {
                currentSectionBeingBuilt[courseId] = null;
                document.getElementById(`${courseId}-section-id`).value = '';
            }
            
            updateCurrentTimesDisplay(courseId);
        }
        
        function finishSection(courseId) {
            const current = currentSectionBeingBuilt[courseId];
            
            if (!current || current.times.length === 0) {
                alert('Add at least one meeting time before finishing the section');
                return;
            }
            
            // Save to actual course data
            if (!courses[courseId].sections[current.id]) {
                courses[courseId].sections[current.id] = [];
            }
            
            courses[courseId].sections[current.id] = current.times;
            
            // Clear temp storage
            currentSectionBeingBuilt[courseId] = null;
            
            // Clear inputs
            document.getElementById(`${courseId}-section-id`).value = '';
            document.getElementById(`${courseId}-current-times`).innerHTML = '';
            
            // Re-render
            sortAndRenderCourses();
        }

        function addSectionTime(courseId) {
            // This is now just calling the new function
            addTimeToCurrentSection(courseId);
        }

        function renderSections(courseId) {
            const container = document.getElementById(`${courseId}-sections`);
            const sections = courses[courseId].sections;
            
            let html = '';
            for (const [sectionId, times] of Object.entries(sections)) {
                html += `
                    <div class="section-card">
                        <div class="section-header">
                            <span>${sectionId}</span>
                            <div>
                                <button class="secondary small" onclick="editSection('${courseId}', '${sectionId}')" style="margin-right: 5px;">Edit</button>
                                <button class="danger" onclick="removeSection('${courseId}', '${sectionId}')">‚úï</button>
                            </div>
                        </div>
                        <div class="time-list">`;
                
                times.forEach((time, idx) => {
                    html += `
                        <div class="time-item">
                            ${time.day.substring(0, 3)} ${time.start}-${time.end}
                        </div>`;
                });
                
                html += `</div></div>`;
            }
            
            container.innerHTML = html;
        }

        function editSection(courseId, sectionId) {
            // Load section into the editing form
            const section = courses[courseId].sections[sectionId];
            
            // Set up current section being built
            currentSectionBeingBuilt[courseId] = {
                id: sectionId,
                times: [...section] // Copy the times
            };
            
            // Update the section ID field
            document.getElementById(`${courseId}-section-id`).value = sectionId;
            
            // Show what's being edited
            updateCurrentTimesDisplay(courseId);
            
            // Remove from saved sections (will be re-added when "Done Section" is clicked)
            delete courses[courseId].sections[sectionId];
            sortAndRenderCourses();
            
            // Scroll to the editing area
            document.getElementById(`${courseId}-section-id`).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function removeSection(courseId, sectionId) {
            if (confirm(`Delete section ${sectionId}?`)) {
                delete courses[courseId].sections[sectionId];
                sortAndRenderCourses();
            }
        }

        function removeTime(courseId, sectionId, timeIdx) {
            courses[courseId].sections[sectionId].splice(timeIdx, 1);
            if (courses[courseId].sections[sectionId].length === 0) {
                delete courses[courseId].sections[sectionId];
            }
            sortAndRenderCourses();
        }

        function removeCourse(courseId) {
            delete courses[courseId];
            sortAndRenderCourses();
            updateCourseCount();
        }

        function updateCourseCount() {
            document.getElementById('course-count').textContent = Object.keys(courses).length;
        }

        function addBlockedTime() {
            const day = document.getElementById('blocked-day').value;
            const start = document.getElementById('blocked-start').value;
            const end = document.getElementById('blocked-end').value;
            
            const container = document.getElementById('blocked-times-container');
            const id = Date.now();
            const blockedDiv = document.createElement('div');
            blockedDiv.className = 'blocked-time';
            blockedDiv.id = `blocked-${id}`;
            blockedDiv.innerHTML = `
                <span>${day} ${start}-${end}</span>
                <button class="danger" onclick="removeBlockedTime(${id})">Remove</button>
            `;
            container.appendChild(blockedDiv);
        }

        function removeBlockedTime(id) {
            document.getElementById(`blocked-${id}`).remove();
        }

        function generateSchedules() {
            const coursesArray = [];
            
            for (const [courseId, course] of Object.entries(courses)) {
                const sections = [];
                for (const [sectionId, times] of Object.entries(course.sections)) {
                    // Format times to ensure 24-hour format
                    const formattedTimes = times.map(t => ({
                        day: t.day,
                        start: formatTime24(t.start),
                        end: formatTime24(t.end)
                    }));
                    sections.push({ id: sectionId, times: formattedTimes });
                }
                
                if (sections.length > 0) {
                    coursesArray.push({
                        name: course.name,
                        priority: course.priority,
                        sections: sections
                    });
                }
            }

            const blockedTimes = [];
            document.querySelectorAll('.blocked-time').forEach(el => {
                const text = el.textContent.trim();
                const match = text.match(/(\w+) (\d+:\d+)-(\d+:\d+)/);
                if (match) {
                    blockedTimes.push({
                        day: match[1],
                        start: formatTime24(match[2]),
                        end: formatTime24(match[3])
                    });
                }
            });

            const maxSchedules = parseInt(document.getElementById('max-schedules').value);

            fetch('/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ courses: coursesArray, blockedTimes, maxSchedules })
            })
            .then(r => r.json())
            .then(data => {
                displayResults(data);
            })
            .catch(err => {
                alert('Error generating schedules: ' + err);
            });
        }

        function timeToMinutes(timeStr) {
            // Handle both "HH:MM" and "H:MM" formats
            const parts = timeStr.split(':');
            const hours = parseInt(parts[0]);
            const minutes = parseInt(parts[1]);
            return hours * 60 + minutes;
        }

        function formatTime24(timeStr) {
            // Ensure time is in HH:MM format (24-hour)
            const parts = timeStr.split(':');
            const hours = parts[0].padStart(2, '0');
            const minutes = parts[1];
            return `${hours}:${minutes}`;
        }

        function displayResults(data) {
            const container = document.getElementById('results-container');
            
            if (data.count === 0) {
                container.innerHTML = '<div class="input-section"><h2>No valid schedules found! Try adjusting priorities or removing conflicts.</h2></div>';
                return;
            }

            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            const startHour = 8;
            const endHour = 19;
            const hours = [];
            for (let h = startHour; h <= endHour; h++) {
                hours.push(`${h}:00`);
            }

            let html = `<div class="input-section"><h2>Found ${data.count} Valid Schedule(s)</h2></div><div class="results">`;
            
            data.schedules.forEach((schedule, scheduleIdx) => {
                const courseColors = {};
                schedule.forEach((course, idx) => {
                    courseColors[course.course] = COLORS[idx % COLORS.length];
                });

                html += `<div class="schedule-card">
                    <div class="schedule-header">Schedule ${scheduleIdx + 1}</div>
                    <div class="schedule-grid">
                        <div class="time-column">
                            <div style="height: 42px;"></div>`;
                
                // Time markers
                hours.forEach(hour => {
                    html += `<div class="time-marker">${hour}</div>`;
                });
                
                html += `</div><div class="day-columns">`;
                
                // Day columns
                days.forEach(day => {
                    html += `<div class="day-column">
                        <div class="day-header">${day}</div>
                        <div class="day-content">`;
                    
                    // Add class blocks for this day
                    schedule.forEach(course => {
                        course.times.forEach(classTime => {
                            if (classTime.day === day) {
                                const startMinutes = timeToMinutes(classTime.start);
                                const endMinutes = timeToMinutes(classTime.end);
                                const startOfDay = startHour * 60;
                                
                                // Calculate position and height
                                const topPosition = ((startMinutes - startOfDay) / 60) * 60;
                                const height = ((endMinutes - startMinutes) / 60) * 60;
                                
                                // Ensure non-negative values
                                if (topPosition >= 0 && height > 0) {
                                    const color = courseColors[course.course];
                                    html += `<div class="class-block" style="
                                        top: ${topPosition}px;
                                        height: ${height}px;
                                        background: ${color.bg};
                                        border-left-color: ${color.border};
                                    ">
                                        <div class="class-name" style="color: ${color.text};">${course.course}</div>
                                        <div class="class-section">${course.section}</div>
                                        <div class="class-section">${classTime.start}-${classTime.end}</div>
                                    </div>`;
                                }
                            }
                        });
                    });
                    
                    html += `</div></div>`;
                });
                
                html += `</div></div>`;
                
                // Color legend
                html += `<div class="course-colors">`;
                schedule.forEach(course => {
                    const color = courseColors[course.course];
                    html += `<div class="color-legend">
                        <div class="color-box" style="background: ${color.bg}; border-color: ${color.border};"></div>
                        <span>${course.course} (${course.section})</span>
                    </div>`;
                });
                html += `</div></div>`;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
    </script>
</body>
</html>